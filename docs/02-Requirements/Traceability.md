
# Traceability Matrix

Maintain mapping across Story ↔ Screen ↔ API ↔ DB ↔ Test Cases.

> Scope: P0 stories for MVP across all modules (AUTH, USERS, CATALOG, ORDERS, PAYMENTS, NOTIFICATIONS, ADMIN, REPORTING).

| Story ID        | Module        | Screen(s) (UX)                                                                                   | API (OpenAPI)          | DB (Conceptual tables)                         | Test Case IDs (TC/UT/IT/E2E/SEC)      |
|-----------------|--------------|--------------------------------------------------------------------------------------------------|------------------------|-----------------------------------------------|---------------------------------------|
| US-AUTH-001     | AUTH         | SC-AUTH-001, SC-AUTH-002                                                                         | POST /api/v1/auth/end-user/register/request-otp; POST /api/v1/auth/end-user/register/verify-otp | auth_otp_request, auth_refresh_token, users_user | TC-AUTH-S01 / TC-AUTH-S02 / TC-AUTH-R01 / TC-AUTH-R02 / TC-AUTH-R03 / TC-AUTH-R04 / TC-AUTH-SEC01 / TC-AUTH-SEC02 / UT-AUTH-001 / IT-AUTH-001 / E2E-AUTH-001 / SEC-AUTH-001 / SEC-AUTH-002 |
| US-AUTH-002     | AUTH         | SC-AUTH-003, SC-AUTH-002                                                                         | POST /api/v1/auth/end-user/login/request-otp; POST /api/v1/auth/end-user/login/verify-otp       | auth_otp_request, auth_refresh_token, users_user | UT-AUTH-002 / IT-AUTH-002 / E2E-AUTH-002 / SEC-AUTH-003 |
| US-AUTH-003     | AUTH         | SC-AUTH-004                                                                                      | POST /api/v1/auth/refresh                                                            | auth_refresh_token, users_user                    | UT-AUTH-003 / IT-AUTH-003 / E2E-AUTH-003 / SEC-AUTH-005 |
| US-AUTH-004     | AUTH         | SC-AUTH-004                                                                                      | POST /api/v1/auth/logout                                                             | auth_refresh_token                                | UT-AUTH-004 / IT-AUTH-004 / E2E-AUTH-004 / SEC-AUTH-007 |
| US-AUTH-005     | AUTH         | SC-AUTH-005                                                                                      | POST /api/v1/auth/login                                                              | auth_admin_account, auth_refresh_token, admin_admin_user | UT-AUTH-005 / IT-AUTH-005 / E2E-AUTH-005 / SEC-AUTH-008 |
| US-USERS-001    | USERS        | Màn hình Import nhân sự; Màn hình/section Kết quả import                                         | POST /api/v1/users/import; GET /api/v1/users/import/{importId} | users_user, users_import_job, users_import_row, admin_company, admin_pickup_point | UT-USERS-001 / IT-USERS-003 / E2E-USERS-001 / SEC-USERS-002 |
| US-USERS-002    | USERS        | Màn hình Quản lý mạng lưới/Tier; Popup/section Chỉnh sửa Ref Tier                               | GET /api/v1/users/{id}/ref-tier; PUT /api/v1/users/{id}/ref-tier | users_user, users_ref_tier_history            | UT-USERS-002 / IT-USERS-002 / E2E-USERS-002 / SEC-USERS-001 |
| US-USERS-003    | USERS        | Màn hình danh sách User; Màn hình chi tiết hồ sơ User                                            | GET /api/v1/users/{id}; PATCH /api/v1/users/{id}/kyc           | users_user, admin_audit_log                   | UT-USERS-003 / IT-USERS-001 / E2E-USERS-001 / SEC-USERS-001 |
| US-USERS-005    | USERS        | Màn hình danh sách User; Popup/section Thay đổi trạng thái User                                 | GET /api/v1/users/{id}; PATCH /api/v1/users/{id}/status        | users_user, users_status_history, admin_audit_log | UT-USERS-001 / IT-USERS-002 / E2E-USERS-002 / SEC-USERS-001 |
| US-USERS-006    | USERS        | Màn hình danh sách User (lọc/tìm kiếm đa tiêu chí)                                               | GET /api/v1/users                                            | users_user, admin_company, admin_pickup_point | UT-USERS-002 / IT-USERS-001 / E2E-USERS-001 / SEC-USERS-002 |
| US-CATALOG-001  | CATALOG      | Màn hình danh sách Sản phẩm; Form chi tiết Sản phẩm                                              | GET /api/v1/catalog/admin/products; POST /api/v1/catalog/admin/products; GET /api/v1/catalog/admin/products/{id}; PATCH /api/v1/catalog/admin/products/{id} | catalog_product, catalog_category, catalog_supplier | UT-CATALOG-001 / IT-CATALOG-001 / E2E-CATALOG-001 / SEC-CATALOG-001 |
| US-CATALOG-002  | CATALOG      | Màn hình cấu hình Ngành hàng                                                                     | GET /api/v1/catalog/categories; POST /api/v1/catalog/categories; PATCH /api/v1/catalog/categories/{id} | catalog_category                               | UT-CATALOG-001 / IT-CATALOG-001 / E2E-CATALOG-001 / SEC-CATALOG-001 |
| US-CATALOG-003  | CATALOG      | Màn hình danh sách Lô hàng; Form chi tiết Lô; Màn hình QC kiểm duyệt                            | GET /api/v1/catalog/batches; POST /api/v1/catalog/batches; GET /api/v1/catalog/batches/{id}; PATCH /api/v1/catalog/batches/{id}/status | catalog_batch, catalog_batch_item, catalog_inventory | UT-CATALOG-002 / IT-CATALOG-002 / E2E-CATALOG-002 / SEC-CATALOG-002 |
| US-CATALOG-004  | CATALOG      | Màn hình danh sách sản phẩm; Màn hình chi tiết sản phẩm (End User Portal)                        | GET /api/v1/catalog/products; GET /api/v1/catalog/products/{id} | catalog_product, catalog_category, catalog_inventory | UT-CATALOG-003 / IT-CATALOG-003 / E2E-CATALOG-001 / SEC-CATALOG-002 |
| US-CATALOG-005  | CATALOG      | N/A (backend integration giữa CATALOG và ORDERS)                                                 | GET /api/v1/catalog/products/{id}/stock        | catalog_inventory, catalog_batch, catalog_batch_item, orders_order | UT-CATALOG-003 / IT-CATALOG-003 / E2E-CATALOG-002 / SEC-CATALOG-002 |
| US-ORDERS-001   | ORDERS       | Giỏ hàng; Màn hình xác nhận đơn (End User Portal)                                                | POST /api/v1/orders; GET /api/v1/orders/{id} | orders_order, orders_order_item, users_user, admin_company, admin_pickup_point, catalog_product, catalog_inventory | UT-ORDERS-001 / IT-ORDERS-001 / E2E-ORDERS-001 / SEC-ORDERS-001 |
| US-ORDERS-002   | ORDERS       | Màn hình danh sách đơn cho Ops; Màn hình Shipper xem/đổi trạng thái đơn                         | GET /api/v1/orders; GET /api/v1/orders/{id}; PATCH /api/v1/orders/{id}/status | orders_order, orders_order_status_history, users_user, admin_pickup_point | UT-ORDERS-002 / IT-ORDERS-002 / E2E-ORDERS-002 / SEC-ORDERS-002 |
| US-ORDERS-003   | ORDERS       | Màn hình chi tiết đơn (Ops) với nút Yêu cầu hủy; Màn hình danh sách đơn chờ duyệt hủy (Super Admin) | POST /api/v1/orders/{id}/cancel-request; GET /api/v1/orders/cancel-requests; POST /api/v1/orders/{id}/cancel-request/decision | orders_order, orders_order_cancel_request, orders_order_status_history, admin_audit_log | UT-ORDERS-003 / IT-ORDERS-003 / E2E-ORDERS-003 / SEC-ORDERS-003 |
| US-ORDERS-004   | ORDERS       | Màn hình danh sách đơn cho Shipper; Màn hình chi tiết đơn với nút Đã nhận/Đổi trả               | GET /api/v1/orders; GET /api/v1/orders/{id}; POST /api/v1/orders/{id}/delivery-proof; POST /api/v1/orders/{id}/returns | orders_order, orders_order_delivery_proof, orders_order_return_request, orders_order_return_item, payments_receipt | UT-ORDERS-004 / IT-ORDERS-004 / E2E-ORDERS-004 / SEC-ORDERS-004 |
| US-PAYMENTS-001 | PAYMENTS     | N/A (logic nền giữa ORDERS và PAYMENTS)                                                          | TBD (Tech Lead)        | PAYMENTS_Payment, ORDERS_Order                 | TBD-UT-PAYMENTS-001 / TBD-IT-PAYMENTS-001 / TBD-E2E-PAYMENTS-001 / TBD-SEC-PAYMENTS-001 |
| US-PAYMENTS-002 | PAYMENTS     | Màn hình Shipper xem chi tiết đơn và tạo Phiếu thu COD                                           | TBD (Tech Lead)        | PAYMENTS_Receipt, ORDERS_Order, USERS_User     | TBD-UT-PAYMENTS-002 / TBD-IT-PAYMENTS-002 / TBD-E2E-PAYMENTS-002 / TBD-SEC-PAYMENTS-002 |
| US-PAYMENTS-003 | PAYMENTS     | Màn hình Shipper xem tổng hợp COD và nút Chốt ca                                                 | TBD (Tech Lead)        | PAYMENTS_Shift, PAYMENTS_Receipt, USERS_User   | TBD-UT-PAYMENTS-003 / TBD-IT-PAYMENTS-003 / TBD-E2E-PAYMENTS-003 / TBD-SEC-PAYMENTS-003 |
| US-PAYMENTS-004 | PAYMENTS     | Màn hình Finance xem danh sách Ca và chi tiết Ca để đối soát                                     | TBD (Tech Lead)        | PAYMENTS_Shift, PAYMENTS_Receipt, USERS_User   | TBD-UT-PAYMENTS-004 / TBD-IT-PAYMENTS-004 / TBD-E2E-PAYMENTS-004 / TBD-SEC-PAYMENTS-004 |
| US-PAYMENTS-005 | PAYMENTS     | Màn hình Finance cấu hình hạn mức và xem công nợ                                                 | TBD (Tech Lead)        | PAYMENTS_CreditLimit, PAYMENTS_DebtBalance, USERS_User | TBD-UT-PAYMENTS-005 / TBD-IT-PAYMENTS-005 / TBD-E2E-PAYMENTS-005 / TBD-SEC-PAYMENTS-005 |
| US-NOTIFICATIONS-001 | NOTIFICATIONS | Màn hình Admin Portal: Quản lý template ZNS                                                 | TBD (Tech Lead)        | NOTIF_Template, NOTIF_TemplatePlaceholder      | TBD-UT-NOTIF-001 / TBD-IT-NOTIF-001 / TBD-E2E-NOTIF-001 / TBD-SEC-NOTIF-001 |
| US-NOTIFICATIONS-002 | NOTIFICATIONS | N/A (backend integration giữa AUTH và NOTIFICATIONS)                                       | TBD (Tech Lead)        | NOTIF_NotificationLog, AUTH_Otp                | TBD-UT-NOTIF-002 / TBD-IT-NOTIF-002 / TBD-E2E-NOTIF-002 / TBD-SEC-NOTIF-002 |
| US-NOTIFICATIONS-003 | NOTIFICATIONS | N/A (sự kiện nền giữa ORDERS/PAYMENTS và NOTIFICATIONS)                                    | TBD (Tech Lead)        | NOTIF_NotificationLog, NOTIF_Config, ORDERS_Order, PAYMENTS_DebtBalance | TBD-UT-NOTIF-003 / TBD-IT-NOTIF-003 / TBD-E2E-NOTIF-003 / TBD-SEC-NOTIF-003 |
| US-ADMIN-001    | ADMIN        | Màn hình Admin Portal: Quản lý Công ty & Điểm nhận                                              | TBD (Tech Lead)        | ADMIN_Company, ADMIN_PickupPoint, USERS_User   | TBD-UT-ADMIN-001 / TBD-IT-ADMIN-001 / TBD-E2E-ADMIN-001 / TBD-SEC-ADMIN-001 |
| US-ADMIN-002    | ADMIN        | Màn hình Admin Portal: Quản lý Admin & phân quyền                                               | TBD (Tech Lead)        | ADMIN_AdminUser, ADMIN_Role, ADMIN_AdminRole   | TBD-UT-ADMIN-002 / TBD-IT-ADMIN-002 / TBD-E2E-ADMIN-002 / TBD-SEC-ADMIN-002 |
| US-REPORTING-001| REPORTING    | Màn hình "Báo cáo doanh số" trên Admin Portal                                                  | GET /api/v1/reporting/sales/company        | reporting_sales_summary, orders_order, catalog_product, admin_company | UT-REPORT-001 / IT-REPORT-001 / E2E-REPORT-001 / SEC-REPORT-001 |
| US-REPORTING-003| REPORTING    | Màn hình "Báo cáo hoa hồng" trong Admin Portal                                                 | GET /api/v1/reporting/commissions/t2        | reporting_commission_t2, payments_commission_ledger (conceptual), users_user | UT-REPORT-002 / IT-REPORT-003 / E2E-REPORT-001 / SEC-REPORT-001 |
| US-REPORTING-004| REPORTING    | Màn hình "Báo cáo COD theo Ca" trong Admin Portal                                              | GET /api/v1/reporting/cod/shifts        | reporting_cod_shift, payments_shift, payments_receipt | UT-REPORT-001 / IT-REPORT-002 / E2E-REPORT-001 / SEC-REPORT-002 |
| US-REPORTING-005| REPORTING    | Màn hình "Báo cáo công nợ" trong Admin Portal                                                  | GET /api/v1/reporting/debts/companies; GET /api/v1/reporting/debts/companies/{companyId}/users        | reporting_debt_company, reporting_debt_user, payments_debt_balance, admin_company, users_user | UT-REPORT-003 / IT-REPORT-003 / E2E-REPORT-002 / SEC-REPORT-002 |
| US-REPORTING-006| REPORTING    | Dashboard Admin Portal — widget tổng quan                                                       | GET /api/v1/reporting/dashboard/orders-today; GET /api/v1/reporting/dashboard/cod-open; GET /api/v1/reporting/dashboard/debt-overdue; GET /api/v1/reporting/dashboard/top-category        | reporting_dashboard_snapshot, orders_order, payments_shift, payments_debt_balance, catalog_category | UT-REPORT-001 / IT-REPORT-001 / E2E-REPORT-002 / SEC-REPORT-001 |
